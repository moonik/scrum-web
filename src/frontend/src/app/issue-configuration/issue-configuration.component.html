<a class="create-new-field" id="create-new-field" (click)="addField(fields.length)"><b>Create new field</b></a>

<form class="field-creation-form"  *ngFor="let field of fields" (ngSubmit)="submitField(field)">
  <div [hidden]="field.submitted">
    <label for="fieldName">Field name</label>
    <input name="fieldName" [(ngModel)]="field.fieldName">
    <select name="fieldType" id="field-type" [(ngModel)]="field.fieldType">
      <option *ngFor="let type of fieldTypesArray" [ngValue]="type">{{ type }}</option>
    </select>
    <label for="isRequired">Is required?</label>
    <input type="checkbox" name="isRequired" [(ngModel)]="field.isRequired">
    <span class="fa fa-close" id="remove-field" (click)="removeField(field, field.fieldType)"></span>

    <br>

    <div class="additional-params">
      <div class="params-input-field" *ngIf="isParamsTextField(field.fieldType)">
        <label for="maxChars">Maximum characters</label>
        <input type="number" name="maxChars" [(ngModel)]="field.maxCharacters">

        <label for="minChars">Minimum characters</label>
        <input type="number" name="minChars" [(ngModel)]="field.minCharacters">
      </div>
      <a (click)="addFieldElement(field, field.elements.length)" *ngIf="isParamsElements(field.fieldType)"><b>Add {{ getFieldElement(field.fieldType) }}</b></a>
      <div class="params-elements" *ngFor="let element of field.elements; let i = index" [attr.data-index]="i">
        <label>{{ getFieldElement(field.fieldType) }}: {{ i+1 }}</label>
        <input class="field-element" id="{{i+1}}" name="{{i+1}}" [(ngModel)]="element.value" placeholder="{{element.value}}">
        <span class="fa fa-close" (click)="removeFieldElement(field, element)"></span>
      </div>
    </div>
    <button class="btn btn-primary" id="btn-create" [disabled]="!isValidGeneralData(field)">Submit</button>
  </div>

  <div class="submitted-field" [hidden]="!field.submitted">
    <span>
     <h4>
        <a (click)="editField(field)">
            {{ field.fieldName }} ->
            {{ field.fieldType?.toLowerCase().replace('_', ' ') }}
        </a>
        <span class="fa fa-close" (click)="removeField(field, field.fieldType)"></span>
     </h4>
  </span>
  </div>
</form>

<form class="submit-form" #form="ngForm" *ngIf="submitted()">
  <button class="btn btn-primary" (click)="createFields(form.value.issueType)" [disabled]="form.value.issueType === ''">Submit fields</button>
  <span>for issue type:</span>
  <select name="issueType" ngModel #issueType="ngModel">
    <option *ngFor="let type of issueTypes">{{ type }}</option>
  </select>
</form>

