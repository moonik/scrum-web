<a class="create-new-field" id="create-new-field" (click)="addField(fields.length)"><b>Create new field</b></a>

<form class="field-creation-form" #form="ngForm" *ngFor="let field of fields" (ngSubmit)="submitField(form.value, field)">
  <div [hidden]="field.submitted">
    <label for="fieldName">Field name</label>
    <input name="fieldName" ngModel #fieldName="ngModel">
    <select name="fieldType" id="field-type" ngModel #fieldType="ngModel">
      <option *ngFor="let type of fieldTypesArray" [ngValue]="type">{{ type }}</option>
    </select>
    <label for="isRequired">Is required?</label>
    <input type="checkbox" name="isRequired" ngModel #isRequired="ngModel">
    <span class="fa fa-close" id="remove-field" (click)="removeField(field, form.value.fieldType)"></span>

    <br>

    <div class="additional-params">
      <div class="params-input-field" *ngIf="isParamsTextField(form.value.fieldType)">
        <label for="maxChars">Maximum characters</label>
        <input type="number" name="maxChars" ngModel #maxChars="ngModel">

        <label for="minChars">Minimum characters</label>
        <input type="number" name="minChars" ngModel #minChars="ngModel">
      </div>
      <a (click)="addFieldElement(field, field.elements.length)" *ngIf="isParamsElements(form.value.fieldType)"><b>Add {{ getFieldElement(form.value.fieldType) }}</b></a>
      <div class="params-elements" *ngFor="let element of field.elements">
        <label>{{ getFieldElement(form.value.fieldType) }}: {{ element.id+1 }}</label>
        <input class="field-element" id="element" name="element" [(ngModel)]="element.value" placeholder="{{element.value}}">
        <span class="fa fa-close" (click)="removeFieldElement(field, element)"></span>
      </div>
    </div>
    <button class="btn btn-primary" id="btn-create" [disabled]="!isValidGeneralData(form.value)">Submit</button>
  </div>

  <div class="submitted-field" [hidden]="!field.submitted">
    <span>
     <h4>
        <a (click)="editField(field)">
            {{ form.value.fieldName }} ->
            {{ form.value.fieldType?.toLowerCase().replace('_', ' ') }}
        </a>
        <span class="fa fa-close" (click)="removeField(field, form.value.fieldType)"></span>
     </h4>
  </span>
  </div>
</form>
<form class="submit-form" #form="ngForm" *ngIf="submitted()">
  <button class="btn btn-primary" (click)="createFields(form.value.issueType)" [disabled]="form.value.issueType === ''">Create fields</button>
  <span>for issue type:</span>
  <select name="issueType" ngModel #issueType="ngModel">
    <option *ngFor="let type of issueTypes">{{ type }}</option>
  </select>
</form>

